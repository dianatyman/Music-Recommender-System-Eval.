[{"/Users/dianatyman/Documents/GitHub/Music-Recommender-System-Eval./src/index.js":"1","/Users/dianatyman/Documents/GitHub/Music-Recommender-System-Eval./src/App.js":"2","/Users/dianatyman/Documents/GitHub/Music-Recommender-System-Eval./src/reportWebVitals.js":"3","/Users/dianatyman/Documents/GitHub/Music-Recommender-System-Eval./src/Routes.js":"4","/Users/dianatyman/Documents/GitHub/Music-Recommender-System-Eval./src/CFiltering/CollabFiltering.js":"5","/Users/dianatyman/Documents/GitHub/Music-Recommender-System-Eval./src/CBased/CBased.js":"6","/Users/dianatyman/Documents/GitHub/Music-Recommender-System-Eval./src/history.js":"7"},{"size":564,"mtime":1620041625513,"results":"8","hashOfConfig":"9"},{"size":5292,"mtime":1623831062234,"results":"10","hashOfConfig":"9"},{"size":362,"mtime":1619434625846,"results":"11","hashOfConfig":"9"},{"size":702,"mtime":1623626835966,"results":"12","hashOfConfig":"9"},{"size":7634,"mtime":1624001492599,"results":"13","hashOfConfig":"9"},{"size":5966,"mtime":1623831012145,"results":"14","hashOfConfig":"9"},{"size":84,"mtime":1620039118753,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"18","usedDeprecatedRules":"19"},"1mk9621",{"filePath":"20","messages":"21","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"22"},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"19"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"19"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"29","messages":"30","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"19"},"/Users/dianatyman/Documents/GitHub/Music-Recommender-System-Eval./src/index.js",["34"],"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n\t<React.StrictMode>\n       <App />\n    </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n",["35","36"],"/Users/dianatyman/Documents/GitHub/Music-Recommender-System-Eval./src/App.js",["37"],"import './App.css';\nimport React, { Component } from \"react\";\nimport Routes from './Routes';\nimport CBased from \"./CBased/CBased\";\nimport CFiltering from \"./CFiltering/CollabFiltering\";\n\nclass App extends Component {\n\n  \tconstructor(props){\n    \tsuper(props);\n    \tthis.state = {\n      \t\ttoken:'',\n      \t\tdataAudio:[],\n      \t\tisActive:false,\n      \t\tuserName:'',\n      \t\tsongName:[],\n      \t\tsongID:[],\n      \t\tartistID:[],\n      \t\tgenres:[],\n      \t\taudio_feat:[],\n      \t\tlimit:10\t\t\t\t\n    \t}\n  \t}\n\n  \tcomponentDidMount() {\n    \tconst url = new URL(window.location.href);\n\t\tconst accessToken = url.searchParams.get('access_token');\n\n\t\tif(!accessToken){\n    \t\treturn;\n    \t}else{\n\n\t\t  \tthis.setState({\n\t        \ttoken: accessToken\n\t    \t});\n\n\t    \t// Fetch User's profile information\n\t    \tfetch('https://api.spotify.com/v1/me', {\n\t      \t\tmethod: 'GET',\n\t      \t\theaders: {'Authorization': 'Bearer ' + accessToken}\n\t    \t}).then(response => response.json())\n\t    \t.then(data => this.setState({\n\t      \t\tuserName: data.display_name\n\t    \t}));\n\n\t    \t// Fetch User's most listened/top songs + songs id's\n\t\t    fetch('https://api.spotify.com/v1/me/top/tracks?limit=' + this.state.limit, {\n\t\t      \tmethod: 'GET',\n\t\t      \theaders: {'Authorization': 'Bearer ' + accessToken}\n\t\t    }).then(response => response.json())\n\t\t    .then(data => {\n\t\t    \tif(!data){\n\t\t    \t\treturn;\n\t\t    \t}\n\t\t    \tlet id = [];\n\t\t    \t\n\t\t    \tlet ids = data.items.map(datas => {\n\t\t    \t\tif (!id.includes(datas.id)){\n\t      \t\t\t\tid.push(datas.id)\n\t\t        \t};\n\t\t        \t\n\t\t        \treturn id;\n\t\t    \t})\n\t\t    \tthis.setState({\n\t\t    \t\tsongID: ids[0]\n\t\t    \t})\n\t\t    });\n\n\t\t    // Fetch User's top 3 artists -- nedeed for spotify's api content based recommendations\n\t\t    fetch('https://api.spotify.com/v1/me/top/artists?limit=3', {\n\t\t      \tmethod: 'GET',\n\t\t      \theaders: {'Authorization': 'Bearer ' + accessToken}\n\t\t    }).then(response => response.json())\n\t\t    .then(data => {\n\t\t    \tif(!data){\n\t\t    \t\treturn;\n\t\t    \t}\n\t\t    \t\n\t\t    \tlet id = []\n\t\t    \tlet gen = []\n\t\t    \tlet ids = data.items.map(datas => {\n\t\t    \t\tif (!id.includes(datas.id)){\n\t      \t\t\t\tid.push(datas.id)\n\t\t        \t};\n\n\t\t        \treturn id;\n\t\t    \t})\n\n\t\t    \tlet genre = data.items.map(datas => {\n\t\t    \t\tif(!gen.includes(datas.genres)){\n\t\t    \t\t\tgen.push(datas.genres)\n\t\t    \t\t};\n\n\t\t    \t\tthis.setState({\n\t\t    \t\t\tgenres: gen.flat()\n\t\t    \t\t});\n\n\t\t    \t\treturn gen;\n\t\t    \t})\n\t\t    \t\n\t\t    \tthis.setState({\n\t\t    \t\tartistID: ids[0]\n\t\t    \t})\n\n\t\t    \t\n\t\t    });\n\t\t}\n\n  \t}\n\n\n  \tshowHandler = ()=>{\n      \tthis.setState({\n        \tisActive: true\n      \t})\n  \t}\n\n  render(){\n    return (\n      <div className=\"App\">\n        <Routes />\n        {this.state.isActive ? \n        \t\n        \t<div>\n        \t<header className=\"App-header\">\n\t        <h1>Music Recommendation System Evaluation</h1>\n\t        <p>\n\t          Thank you for taking part of this evaluation {this.state.userName}! \n\t          This is a music recommendation system where you as a user can decide which recommendation algorithm you enjoy better. \n\t          This web-app is part of my final project for my degree in data science imparted by University Pompeu Fabra.\n\t        </p>\n\t        <p> Please Scroll Down </p>\n\t        </header>\n\t        <br />\n\t        <br />\n\t        <h1 style={{'fontSize': '25px','marginTop': '5px', 'textAlign': 'left', 'border': '3px solid #9DC183', 'padding': '10px'}}>Content Based Recommendations for {this.state.userName} </h1>\n\t        <h4>Content Based recommendations uses item features to recommend other songs similar to what you as a user currently like, based on your previous actions or explicit feedback </h4>\n\t        <h4>You can click on the name of the song to hear a snippet of it, unfortunately not all songs may have snippets...</h4>\n\t        <CBased songID={this.state.songID.toString()} token={this.state.token} artistID={this.state.artistID.toString()} genres={this.state.genres.toString()} />\n\t        \n\t        <br />\n\t        <br />\n\t        <h1 style={{'fontSize': '25px','marginTop': '5px', 'textAlign': 'left', 'border': '3px solid #9DC183', 'padding': '10px'}}>Collaborative Filtering Recommendations for {this.state.userName} </h1>\n\t        <h4>Collaborative Filtering recommendations are based from a method of making automatic predictions (filtering) about the interests of a user by collecting preferences from many users, in this case your Spotify friends.</h4>\n\t        <h4>You can click on the name of the song to hear a snippet of it, unfortunately not all songs may have snippets...</h4>\n\t        <CFiltering userName={this.state.userName} token={this.state.token} artistID={this.state.artistID.toString()} genres={this.state.genres.toString()} />\n\n\t        </div> : <button onClick={() => {\n            \t\t\t\twindow.location = window.location.href.includes('localhost') \n              \t\t\t\t? 'http://localhost:8888/login' \n              \t\t\t\t: 'https://music-recommender-eval-backend.herokuapp.com/login' }\n          \t\t\t\t}>Sign in with Spotify</button>                                                                      \n\n        } \n        <div>{!this.state.isActive && <button onClick={this.showHandler}>Click here to continue</button>}</div>\n        \n\n      </div> \n     \n    );\n  }\n  \n}\n\nexport default App;\n","/Users/dianatyman/Documents/GitHub/Music-Recommender-System-Eval./src/reportWebVitals.js",[],"/Users/dianatyman/Documents/GitHub/Music-Recommender-System-Eval./src/Routes.js",[],"/Users/dianatyman/Documents/GitHub/Music-Recommender-System-Eval./src/CFiltering/CollabFiltering.js",["38","39","40","41","42","43","44","45","46","47","48"],"/Users/dianatyman/Documents/GitHub/Music-Recommender-System-Eval./src/CBased/CBased.js",["49","50","51","52"],"import './CBased.css';\nimport React, {Component} from \"react\";\n\nclass CBased extends Component{\n\n  constructor(){\n    super();\n    this.state = {\n      songs:[],\n      songs_audio:[],\n      songs_img:[],\n      artName:[],\n      full: false\n    }\n  }\n\n  \n  componentDidMount() {\n\n    let songIDS = this.props.songID\n    let accessToken = this.props.token\n    let artistID = this.props.artistID\n    let genres = this.props.genres\n\n    if (!accessToken)\n      return;\n    // Get audio analysis features from the user's songs\n    const energy = [];      //low level feature\n    const key = [];         //high level feature\n    const loudness = [];    //low level feature -- can be negative\n    const acoustic = [];    //low level feature (?)\n    const instrum = [];     //low level feature (?)\n    const liveness = [];    //low level feature (?)\n    const valence = [];     //low level feature (?)\n    const tempo = [];       //high level feature\n    const duration = [];    //song duration in ms!\n\n    const recom_songs = [];\n    const recom_songs_audio = [];\n    const recom_songs_img = [];\n    const artistName = [];\n\n    fetch('https://api.spotify.com/v1/audio-features?ids=' + songIDS, {\n      method: 'GET',\n      headers: {'Authorization': 'Bearer ' + accessToken}\n    }).then(response => response.json())\n    .then(data => {\n      if(!data.audio_features){\n          return;\n        }\n          \n          data.audio_features.map((audio, i) => {\n            \n            energy.push(Number(audio.energy))\n            key.push(audio.key)\n            loudness.push(audio.loudness)\n            acoustic.push(audio.acousticness)\n            instrum.push(audio.instrumentalness)\n            liveness.push(audio.liveness)\n            valence.push(audio.valence)\n            tempo.push(audio.tempo)\n            duration.push(audio.duration_ms)\n          });\n          const avg_energy = (energy.reduce((sum, curr) => sum + curr, 0)/energy.length).toFixed(3) ;            \n          const avg_key = (key.reduce((sum, curr) => sum + curr, 0)/key.length).toFixed() ;                     \n          const avg_loud = (loudness.reduce((sum, curr) => sum + curr, 0)/loudness.length).toFixed(3) ;          \n          const avg_acous = (acoustic.reduce((sum, curr) => sum + curr, 0)/acoustic.length).toFixed(3) ;           \n          const avg_instr = (instrum.reduce((sum, curr) => sum + curr, 0)/instrum.length).toFixed(3) ;           \n          const avg_liveness = (liveness.reduce((sum, curr) => sum + curr, 0)/liveness.length).toFixed(3) ;      \n          const avg_val = (valence.reduce((sum, curr) => sum + curr, 0)/valence.length).toFixed(3) ;\n          const avg_tempo = (tempo.reduce((sum, curr) => sum + curr, 0)/tempo.length).toFixed(3) ;\n          const avg_duration = (duration.reduce((sum, curr) => sum + curr, 0)/duration.length).toFixed() ;      \n\n          // Get the most popular genre of the user\n          const words = genres.split(',');\n          const wordCounts = { };\n\n          for(var i = 0; i < words.length; i++)\n            wordCounts[words[i]] = (wordCounts[words[i]] || 0) + 1;\n\n          const getMax = object => {\n            return Object.keys(object).filter(x => {\n                 return object[x] == Math.max.apply(null, \n                 Object.values(object));\n            });\n          };\n\n          const userGenreMAX = getMax(wordCounts)           // get most popular genre among user's song\n          const userGenre = userGenreMAX[0].toString();\n          const song_seed = songIDS.split(',');             //get user's top song for recommendation seed\n\n          // Get 20 recommendations of content based for the user\n          fetch(\"https://api.spotify.com/v1/recommendations?limit=20&market=ES&seed_artists=\" + artistID + \"&seed_genres=\" + userGenre +\n                    \"&seed_tracks=\" + song_seed[0] + \"&target_acousticness=\" + avg_acous + \"&target_duration_ms=\" + avg_duration + \n                    \"&target_energy=\" + avg_energy + \"&target_instrumentalness=\" + avg_instr + \"&target_key=\" + avg_key + \"&target_liveness=\" + avg_liveness +\n                    \"&target_loudness=\" + avg_loud + \"&target_tempo=\" + avg_tempo + \"&target_valence=\" + avg_val, {\n              method: 'GET',\n              headers: {'Authorization': 'Bearer ' + accessToken}\n          }).then(response => response.json())\n          .then(data => {\n            if(!data){\n              return;\n            }else{\n              \n              data.tracks.map(song =>{\n                recom_songs.push(song.name)                       // song name\n                recom_songs_audio.push(song.preview_url)          // audio sample of song\n                recom_songs_img.push(song.album.images[2].url)    // small album image\n                artistName.push(song.artists[0].name)             // artists name\n              })\n\n              this.setState({\n                songs: recom_songs,\n                songs_img: recom_songs_img,\n                songs_audio: recom_songs_audio,\n                artName: artistName,\n                full: true\n              })\n            }\n          });\n    });\n  }\n\n\n  render() {\n\t   \n      if(this.state.full){\n        return(\n          \n          <div className=\"CB\">\n          {\n            Object.keys(this.state.songs).map(index =>{\n              return (\n                <ul>\n                  <a href={this.state.songs_audio[index]} target={\"_blank\"} rel=\"noreferrer\">\n                  <img src={this.state.songs_img[index]} style={{width: '60px'}}/> {this.state.songs[index] + \" - \" + this.state.artName[index]} <br />\n                  </a>\n                </ul>\n              )\n            })\n          }\n          \n          </div>\n          \n        );\n      }else{\n\n        return(\n          <div className=\"CB\">\n            <p>The recommended songs are not loading...please recharge the web page, excuse the inconvenience.</p>\n          </div>\n        );\n      }\n  }\n    \n}\n\nexport default CBased;","/Users/dianatyman/Documents/GitHub/Music-Recommender-System-Eval./src/history.js",[],{"ruleId":"53","severity":1,"message":"54","line":3,"column":27,"nodeType":"55","messageId":"56","endLine":3,"endColumn":33},{"ruleId":"57","replacedBy":"58"},{"ruleId":"59","replacedBy":"60"},{"ruleId":"53","severity":1,"message":"61","line":89,"column":12,"nodeType":"55","messageId":"56","endLine":89,"endColumn":17},{"ruleId":"53","severity":1,"message":"62","line":28,"column":9,"nodeType":"55","messageId":"56","endLine":28,"endColumn":20},{"ruleId":"53","severity":1,"message":"63","line":29,"column":12,"nodeType":"55","messageId":"56","endLine":29,"endColumn":29},{"ruleId":"53","severity":1,"message":"64","line":30,"column":12,"nodeType":"55","messageId":"56","endLine":30,"endColumn":27},{"ruleId":"53","severity":1,"message":"65","line":31,"column":12,"nodeType":"55","messageId":"56","endLine":31,"endColumn":22},{"ruleId":"66","severity":1,"message":"67","line":38,"column":32,"nodeType":"68","messageId":"69","endLine":38,"endColumn":34},{"ruleId":"66","severity":1,"message":"67","line":66,"column":36,"nodeType":"68","messageId":"69","endLine":66,"endColumn":38},{"ruleId":"66","severity":1,"message":"67","line":72,"column":30,"nodeType":"68","messageId":"69","endLine":72,"endColumn":32},{"ruleId":"66","severity":1,"message":"67","line":84,"column":53,"nodeType":"68","messageId":"69","endLine":84,"endColumn":55},{"ruleId":"70","severity":1,"message":"71","line":117,"column":42,"nodeType":"72","messageId":"73","endLine":117,"endColumn":44},{"ruleId":"66","severity":1,"message":"67","line":139,"column":43,"nodeType":"68","messageId":"69","endLine":139,"endColumn":45},{"ruleId":"74","severity":1,"message":"75","line":176,"column":18,"nodeType":"76","endLine":176,"endColumn":82},{"ruleId":"66","severity":1,"message":"67","line":52,"column":46,"nodeType":"68","messageId":"69","endLine":52,"endColumn":48},{"ruleId":"70","severity":1,"message":"71","line":83,"column":35,"nodeType":"72","messageId":"73","endLine":83,"endColumn":37},{"ruleId":"66","severity":1,"message":"67","line":105,"column":36,"nodeType":"68","messageId":"69","endLine":105,"endColumn":38},{"ruleId":"74","severity":1,"message":"75","line":136,"column":19,"nodeType":"76","endLine":136,"endColumn":83},"no-unused-vars","'Router' is defined but never used.","Identifier","unusedVar","no-native-reassign",["77"],"no-negated-in-lhs",["78"],"'genre' is assigned a value but never used.","'recom_songs' is assigned a value but never used.","'recom_songs_audio' is assigned a value but never used.","'recom_songs_img' is assigned a value but never used.","'artistName' is assigned a value but never used.","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","no-global-assign","no-unsafe-negation"]