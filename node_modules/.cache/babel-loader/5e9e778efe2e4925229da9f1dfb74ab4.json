{"ast":null,"code":"var _jsxFileName = \"/Users/dianatyman/Desktop/music-recom-eval/src/App.js\";\nimport './App.css';\nimport React, { Component } from \"react\";\nimport Button from \"./components/CustomButtonComponent\";\nimport history from './history';\nimport Routes from './Routes';\nimport CBased from \"./CBased/CBased\";\nimport CFiltering from \"./CFiltering/CollabFiltering\";\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport update from 'react-addons-update';\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst spotifyApi = new SpotifyWebApi();\nconst url = new URL(window.location.href);\nconst accessToken = url.searchParams.get('access_token');\nspotifyApi.setAccessToken(accessToken);\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.showHandler = () => {\n      this.setState({\n        isActive: true\n      });\n    };\n\n    this.state = {\n      token: '',\n      isActive: false,\n      userName: '',\n      songName: [],\n      songID: [],\n      songID_str: '',\n      limit: 10 // cambiar le limit a 50!\n\n    };\n  }\n\n  getUserData(accessToken) {\n    // Fetch User's profile information\n    fetch('https://api.spotify.com/v1/me', {\n      method: 'GET',\n      headers: {\n        'Authorization': 'Bearer ' + accessToken\n      }\n    }).then(response => response.json()).then(data => this.setState({\n      userName: data.display_name\n    }));\n  }\n\n  getSongID(accessToken) {// Fetch User's most listened/top songs + songs id's\n    // fetch('https://api.spotify.com/v1/me/top/tracks?limit=' + this.state.limit, {\n    //   \tmethod: 'GET',\n    //   \theaders: {'Authorization': 'Bearer ' + accessToken,\n    //             'Content-Type': 'application/json'}\n    // }).then(response => response.json())\n    // .then(data => this.setState(state => {\n    //   \t//data.items.map(i => state.userData.push(!i.name))\n    //   \t//console.log(data);\n    //   \tdata.items.map(function(i){\n    //     if (!state.songName.includes(i.name) && !state.songID.includes(i.id)){\n    //     \tstate.songName.push(i.name);\n    //  \t\t\tstate.songID.push(i.id);\n    //     };\n    //     return state.songName && state.songID;\n    //   })\n    // }));\n    // .then(data => this.setState({\n    // \tsongName: data.items\n    // }));\n    // .then(ids_str => this.setState({\n    //   songIDs: ids_str\n    // }));\n    // Check if it retreives song name and id correctly\n    // console.log(this.state.dataSpot);\n  }\n\n  componentDidMount() {\n    // const url = new URL(window.location.href);\n    // const accessToken = url.searchParams.get('access_token');\n    // spotifyApi.setAccessToken(accessToken);\n    const me = spotifyApi.getMe();\n    (async () => {\n      const me = await spotifyApi.getMe();\n      console.log(me.body); //getUserPlaylists(me.body.id);\n      //getUserRecentSongs(me.body.id);\n    })().catch(e => {\n      console.error(e);\n    });\n    this.setState({\n      token: accessToken\n    });\n    console.log(accessToken);\n\n    if (accessToken) {\n      this.getUserData(accessToken); //this.getSongID(accessToken);\n      // this.setState({\n      // \t\tsongIDs: this.state.songID.toString()\n      // });\n    }\n\n    ; // this.getSongData(this.state.songID);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Routes, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), this.state.isActive ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"App-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Music Recommendation System Evaluation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Music recommendation system where users can choose which recommendation algorithm they enjoy better. This app is part of my final project for my degree in data science imparted by University Pompeu Fabra.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 10\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            'fontSize': '25px',\n            'marginTop': '5px',\n            'textAlign': 'left',\n            'border': '3px solid #9DC183',\n            'padding': '10px'\n          },\n          children: [\"Content Based Recommendations for \", this.state.userName, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(CBased, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            'fontSize': '25px',\n            'marginTop': '5px',\n            'textAlign': 'left',\n            'border': '3px solid #9DC183',\n            'padding': '10px'\n          },\n          children: [\"Collaborative Filtering Recommendations for \", this.state.userName, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 10\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 10\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location = 'http://localhost:8888/login',\n        children: \"Sign in with Spotify\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: !this.state.isActive && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.showHandler,\n          children: \"Click here to continue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 39\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this);\n  }\n\n} //<button onClick={this.showHandler}>Click here to continue</button>\n\n\nexport default App;","map":{"version":3,"sources":["/Users/dianatyman/Desktop/music-recom-eval/src/App.js"],"names":["React","Component","Button","history","Routes","CBased","CFiltering","BrowserRouter","Route","Switch","update","SpotifyWebApi","spotifyApi","url","URL","window","location","href","accessToken","searchParams","get","setAccessToken","App","constructor","showHandler","setState","isActive","state","token","userName","songName","songID","songID_str","limit","getUserData","fetch","method","headers","then","response","json","data","display_name","getSongID","componentDidMount","me","getMe","console","log","body","catch","e","error","render"],"mappings":"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","sourcesContent":["import './App.css';\nimport React, { Component } from \"react\";\nimport Button from \"./components/CustomButtonComponent\";\nimport history from './history';\nimport Routes from './Routes';\nimport CBased from \"./CBased/CBased\";\nimport CFiltering from \"./CFiltering/CollabFiltering\";\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport update from 'react-addons-update'; \nimport SpotifyWebApi from 'spotify-web-api-js';\n\nconst spotifyApi = new SpotifyWebApi();\nconst url = new URL(window.location.href);\nconst accessToken = url.searchParams.get('access_token');\nspotifyApi.setAccessToken(accessToken);\n\nclass App extends Component {\n\n  \tconstructor(){\n    \tsuper();\n    \tthis.state = {\n      \t\ttoken:'',\n      \t\tisActive:false,\n      \t\tuserName:'',\n      \t\tsongName:[],\n      \t\tsongID:[],\n      \t\tsongID_str:'',\n      \t\tlimit:10\t\t\t\t// cambiar le limit a 50!\n    \t}\n  \t}\n\n  \tgetUserData(accessToken){\n  \t\t// Fetch User's profile information\n    \tfetch('https://api.spotify.com/v1/me', {\n      \t\tmethod: 'GET',\n      \t\theaders: {'Authorization': 'Bearer ' + accessToken}\n    \t}).then(response => response.json())\n    \t.then(data => this.setState({\n      \t\tuserName: data.display_name\n    \t}));\n  \t}\n\n  \tgetSongID (accessToken) {\n  \t\t// Fetch User's most listened/top songs + songs id's\n\t    // fetch('https://api.spotify.com/v1/me/top/tracks?limit=' + this.state.limit, {\n\t    //   \tmethod: 'GET',\n\t    //   \theaders: {'Authorization': 'Bearer ' + accessToken,\n\t    //             'Content-Type': 'application/json'}\n\t    // }).then(response => response.json())\n\t    // .then(data => this.setState(state => {\n\t    //   \t//data.items.map(i => state.userData.push(!i.name))\n\t    //   \t//console.log(data);\n\t    //   \tdata.items.map(function(i){\n\t    //     if (!state.songName.includes(i.name) && !state.songID.includes(i.id)){\n\t    //     \tstate.songName.push(i.name);\n     //  \t\t\tstate.songID.push(i.id);\n\t    //     };\n\t    //     return state.songName && state.songID;\n\t    //   })\n\t    // }));\n\t    // .then(data => this.setState({\n\t    // \tsongName: data.items\n\t    // }));\n\t    // .then(ids_str => this.setState({\n\t    //   songIDs: ids_str\n\t    // }));\n\t    \n\n\t    // Check if it retreives song name and id correctly\n\t    // console.log(this.state.dataSpot);\n\n  \t}\n\n  \tcomponentDidMount() {\n    \t// const url = new URL(window.location.href);\n    \t// const accessToken = url.searchParams.get('access_token');\n\n    \t// spotifyApi.setAccessToken(accessToken);\n    \tconst me = spotifyApi.getMe();\n    \t(async () => {\n    \t\tconst me = await spotifyApi.getMe();\n    \t\tconsole.log(me.body);\n    \t\t//getUserPlaylists(me.body.id);\n    \t\t//getUserRecentSongs(me.body.id);\n  \t\t})().catch(e => {\n    \t\tconsole.error(e);\n  \t\t});\n\n\n\t  \tthis.setState({\n        \ttoken: accessToken\n    \t});\n\n    \tconsole.log(accessToken);\n\n    \tif(accessToken){\n    \t\tthis.getUserData(accessToken);\n      \t\t//this.getSongID(accessToken);\n      \t\t// this.setState({\n        // \t\tsongIDs: this.state.songID.toString()\n      \t\t// });\n    \t};\n    \t// this.getSongData(this.state.songID);\n  \t}\n\n\n  \tshowHandler = ()=>{\n      \tthis.setState({\n        \tisActive: true\n      \t})\n  \t}\n\n  render(){\n    return (\n      <div className=\"App\">\n        <Routes />\n        {this.state.isActive ? \n        \t\n        \t<div>\n        \t<header className=\"App-header\">\n\t        <h1>Music Recommendation System Evaluation</h1>\n\t        <p>\n\t          Music recommendation system where users can choose which recommendation algorithm they enjoy better. \n\t          This app is part of my final project for my degree in data science imparted by University Pompeu Fabra.\n\t        </p>\n\t        </header>\n\t        <br />\n\t        <br />\n\t        <h1 style={{'fontSize': '25px','marginTop': '5px', 'textAlign': 'left', 'border': '3px solid #9DC183', 'padding': '10px'}}>Content Based Recommendations for {this.state.userName} </h1>\n\t        <CBased />\n\n\t        <br />\n\t        <br />\n\t        <h1 style={{'fontSize': '25px','marginTop': '5px', 'textAlign': 'left', 'border': '3px solid #9DC183', 'padding': '10px'}}>Collaborative Filtering Recommendations for {this.state.userName} </h1>\n\n\n\t        \n\n\t        </div> : <button onClick={() => window.location='http://localhost:8888/login' }>Sign in with Spotify</button>                                                                      \n\n        } \n        <div>{!this.state.isActive && <button onClick={this.showHandler}>Click here to continue</button>}</div>\n        \n\n      </div> \n     \n    );\n  }\n  \n}\n\n//<button onClick={this.showHandler}>Click here to continue</button>\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}