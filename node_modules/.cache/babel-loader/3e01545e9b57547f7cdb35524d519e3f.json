{"ast":null,"code":"var _jsxFileName = \"/Users/dianatyman/Desktop/music-recom-eval/src/CBased/CBased.js\";\nimport './CBased.css';\nimport React, { Component } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CBased extends Component {\n  constructor() {\n    super();\n    this.state = {\n      userName: '',\n      token: '',\n      songName: [],\n      songID: [],\n      songIDs: '',\n      data: [],\n      limit: 10,\n      temp: false\n    };\n  }\n\n  getData(accessToken) {\n    const songs = [];\n    const ids = []; // const songs_str = '';\n    // const ids_str = '';\n\n    fetch('https://api.spotify.com/v1/me/top/tracks?limit=' + this.state.limit, {\n      method: 'GET',\n      headers: {\n        'Authorization': 'Bearer ' + accessToken,\n        'Content-Type': 'application/json'\n      }\n    }).then(response => response.json()) //.then(data => this.setState(state => {\n    .then(data => {\n      //data.items.map(i => state.userData.push(!i.name))\n      //console.log(data);\n      // data.items.map(function(i){\n      //   if (!state.songName.includes(i.name) && !state.songID.includes(i.id)){\n      //     state.songName.push(i.name);\n      //     state.songID.push(i.id);\n      //   }\n      //   return state.songName && state.songID;\n      // })\n      data.items.map(i => {\n        if (!songs.includes(i.name) && !ids.includes(i.id)) {\n          songs.push(i.name);\n          ids.push(i.id);\n        }\n\n        const songs_str = songs.toString();\n        let ids_str = ids.toString();\n        this.setState({\n          songIDs: ids_str,\n          temp: true\n        });\n        console.log(this.state.songIDs); //return songs_str && ids_str;\n      });\n    }); // .then(ids_str => this.setState({\n    //   songIDs: ids_str\n    // }));\n    // Check if it retreives song name and id correctly\n\n    console.log('lalalalla');\n\n    if (this.state.temp) {\n      console.log(this.state.songIDs);\n    }\n\n    console.log('lalalalla'); //console.log(this.state.songID);\n  }\n\n  getUserData(accessToken) {\n    // Fetch User's profile information\n    fetch('https://api.spotify.com/v1/me', {\n      method: 'GET',\n      headers: {\n        'Authorization': 'Bearer ' + accessToken\n      }\n    }).then(response => response.json()).then(data => this.setState({\n      userName: data.display_name\n    }));\n  } // getSongData(songIDS){\n  //   // Get audio analysis features from the user's songs\n  //   fetch('https://api.spotify.com/v1/audio-features?ids=' + , {\n  //     method: 'GET',\n  //     headers: {'Authorization': 'Bearer ' + accessToken}\n  //   }).then(response => response.json())\n  //   .then(data => this.setState({\n  //     userName: data.display_name\n  //   }));\n  // }\n\n\n  componentDidMount() {\n    const url = new URL(window.location.href);\n    const accessToken = url.searchParams.get('access_token'); //console.log(accessToken);\n\n    this.setState({\n      token: accessToken\n    });\n    console.log(accessToken);\n\n    if (accessToken) {\n      this.getUserData(accessToken);\n      this.getData(accessToken);\n      this.setState({\n        songIDs: this.state.songID.toString()\n      });\n    }\n\n    ; // this.getSongData(this.state.songID);\n  }\n\n  render() {\n    //console.log(Object.keys(this.state.songName).map(key => (this.state.songName[key])));\n    //console.log(this.state.songName[1]);\n    if (!this.state.token) {\n      console.log(\"LALALALLAALL\");\n      return 'la';\n    }\n\n    ; // This will render once all the specific results have been fetched\n\n    if (this.state.token) {\n      console.log(\"hey\");\n      return this.state.songName.map((song, i) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"song: \", song]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this);\n      });\n    }\n\n    ; // return(\n    // \t\t<div className=\"CB\">\n    //  \t\t\t<h1 style={{'fontSize': '35px','marginTop': '5px' }}>Content Based Reccommendation!</h1>\n    //  \t\t\t<h1 style={{'fontSize': '15px','marginTop': '5px' }}>User top songs:  \n    //          <div>\n    //            {this.state.songName.map((song, i) => {\n    //              return (\n    //                <div key={i}>\n    //                  1st API call data:\n    //                  { song }\n    //                </div>\n    //              );\n    //            })}\n    //          </div>\n    //        </h1>\n    //  \t</div>\n    // \t);\n  }\n\n}\n\nexport default CBased;","map":{"version":3,"sources":["/Users/dianatyman/Desktop/music-recom-eval/src/CBased/CBased.js"],"names":["React","Component","CBased","constructor","state","userName","token","songName","songID","songIDs","data","limit","temp","getData","accessToken","songs","ids","fetch","method","headers","then","response","json","items","map","i","includes","name","id","push","songs_str","toString","ids_str","setState","console","log","getUserData","display_name","componentDidMount","url","URL","window","location","href","searchParams","get","render","song"],"mappings":"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","sourcesContent":["import './CBased.css';\nimport React, {Component} from \"react\";\n\nclass CBased extends Component{\n\n\tconstructor() {\n    super();\n    this.state = {\n      userName:'',\n      token:'',\n      songName:[],\n      songID:[],\n      songIDs:'',\n      data: [],\n      limit:10, \n      temp:false\n    }\n  }\n\n  getData (accessToken) {\n\n    const songs = [];\n    const ids = [];\n\n    // const songs_str = '';\n    // const ids_str = '';\n\n    fetch('https://api.spotify.com/v1/me/top/tracks?limit=' + this.state.limit, {\n      method: 'GET',\n      headers: {'Authorization': 'Bearer ' + accessToken,\n                'Content-Type': 'application/json',}\n    }).then(response => response.json())\n    //.then(data => this.setState(state => {\n    .then(data =>  {\n      //data.items.map(i => state.userData.push(!i.name))\n      //console.log(data);\n      // data.items.map(function(i){\n      //   if (!state.songName.includes(i.name) && !state.songID.includes(i.id)){\n      //     state.songName.push(i.name);\n      //     state.songID.push(i.id);\n      //   }\n      //   return state.songName && state.songID;\n      // })\n      data.items.map((i) => {\n        if (!songs.includes(i.name) && !ids.includes(i.id)){\n          songs.push(i.name);\n          ids.push(i.id);\n        }\n        const songs_str = songs.toString();\n        let ids_str = ids.toString();\n        this.setState({\n          songIDs: ids_str, \n          temp: true\n        });\n        console.log(this.state.songIDs);\n        //return songs_str && ids_str;\n      })\n    });\n    // .then(ids_str => this.setState({\n    //   songIDs: ids_str\n    // }));\n    \n\n    // Check if it retreives song name and id correctly\n    console.log('lalalalla');\n    if(this.state.temp){\n      console.log(this.state.songIDs);\n    }\n    \n    console.log('lalalalla');\n    //console.log(this.state.songID);\n  }\n\n  getUserData(accessToken){\n  \t// Fetch User's profile information\n    fetch('https://api.spotify.com/v1/me', {\n      method: 'GET',\n      headers: {'Authorization': 'Bearer ' + accessToken}\n    }).then(response => response.json())\n    .then(data => this.setState({\n      userName: data.display_name\n    }));\n  }\n\n  // getSongData(songIDS){\n  //   // Get audio analysis features from the user's songs\n  //   fetch('https://api.spotify.com/v1/audio-features?ids=' + , {\n  //     method: 'GET',\n  //     headers: {'Authorization': 'Bearer ' + accessToken}\n  //   }).then(response => response.json())\n  //   .then(data => this.setState({\n  //     userName: data.display_name\n  //   }));\n\n  // }\n\n  componentDidMount() {\n    const url = new URL(window.location.href);\n    const accessToken = url.searchParams.get('access_token');\n\t  //console.log(accessToken);\n\t  this.setState({\n        \ttoken: accessToken\n    });\n\n    console.log(accessToken);\n\n    if(accessToken){\n    \tthis.getUserData(accessToken);\n      this.getData(accessToken);\n      this.setState({\n        songIDs: this.state.songID.toString()\n      });\n    };\n\n    // this.getSongData(this.state.songID);\n\n  }\n\n\trender() {\n\t\t//console.log(Object.keys(this.state.songName).map(key => (this.state.songName[key])));\n    //console.log(this.state.songName[1]);\n    if(!this.state.token){\n      console.log(\"LALALALLAALL\");\n      return 'la';\n    };\n\n\n    // This will render once all the specific results have been fetched\n    if(this.state.token){\n      console.log(\"hey\");\n      return this.state.songName.map((song, i) => {\n        return (\n            <div key={i}>\n                    song: {song}\n            </div>\n        );\n      });\n    };\n    \n\n    \t// return(\n     // \t\t<div className=\"CB\">\n     //  \t\t\t<h1 style={{'fontSize': '35px','marginTop': '5px' }}>Content Based Reccommendation!</h1>\n     //  \t\t\t<h1 style={{'fontSize': '15px','marginTop': '5px' }}>User top songs:  \n     //          <div>\n     //            {this.state.songName.map((song, i) => {\n     //              return (\n     //                <div key={i}>\n     //                  1st API call data:\n     //                  { song }\n     //                </div>\n     //              );\n     //            })}\n     //          </div>\n     //        </h1>\n     //  \t</div>\n      \t\t\n     // \t);\n   }\n    \n}\n\nexport default CBased;"]},"metadata":{},"sourceType":"module"}