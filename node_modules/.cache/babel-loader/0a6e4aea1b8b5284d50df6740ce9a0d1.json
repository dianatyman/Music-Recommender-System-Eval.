{"ast":null,"code":"var _jsxFileName = \"/Users/dianatyman/Desktop/music-recom-eval/src/CBased/CBased.js\";\nimport './CBased.css';\nimport React, { Component } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CBased extends Component {\n  constructor() {\n    super();\n    this.state = {\n      userName: '',\n      token: '',\n      songName: [],\n      songID: [],\n      limit: 10\n    };\n    const url = new URL(window.location.href);\n    const accessToken = url.searchParams.get('access_token'); //console.log(accessToken);\n\n    this.setState({\n      token: accessToken\n    });\n    console.log(this.state.token);\n  }\n\n  getData(accessToken) {\n    fetch('https://api.spotify.com/v1/me/top/tracks?limit=10', {\n      method: 'GET',\n      headers: {\n        'Authorization': 'Bearer ' + accessToken,\n        'Content-Type': 'application/json'\n      }\n    }).then(response => response.json()).then(data => this.setState(state => {\n      //data.items.map(i => state.userData.push(!i.name))\n      //console.log(data);\n      data.items.map(function (i) {\n        if (!state.songName.includes(i.name) && !state.songID.includes(i.id)) {\n          state.songName.push(i.name);\n          state.songID.push(i.id);\n        }\n\n        return state.songName && state.songID;\n      });\n    })); // Check if it retreives song name and id correctly\n    //console.log(this.state.songName);\n    //console.log(this.state.songID);\n  }\n\n  getUserData(accessToken) {\n    // Fetch User's profile information\n    fetch('https://api.spotify.com/v1/me', {\n      method: 'GET',\n      headers: {\n        'Authorization': 'Bearer ' + accessToken\n      }\n    }).then(response => response.json()).then(data => this.setState({\n      userName: data.display_name\n    }));\n  }\n\n  componentDidMount() {\n    //  const url = new URL(window.location.href);\n    //  const accessToken = url.searchParams.get('access_token');\n    // //console.log(accessToken);\n    // this.setState({\n    //      \ttoken: accessToken\n    //  });\n    if (this.state.token) {\n      this.getUserData(this.state.token);\n      this.getData(this.state.token);\n    }\n\n    ;\n  }\n\n  render() {\n    //console.log(Object.keys(this.state.songName).map(key => (this.state.songName[key])));\n    //console.log(this.state.songName[1]);\n    if (this.state.token) {\n      console.log(\"LALALALLAALL\");\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"CB\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          'fontSize': '35px',\n          'marginTop': '5px'\n        },\n        children: \"Content Based Reccommendation!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          'fontSize': '15px',\n          'marginTop': '5px'\n        },\n        children: [\"User top songs:\", /*#__PURE__*/_jsxDEV(\"div\", {\n          children: this.state.songName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 8\n    }, this);\n  }\n\n}\n\nexport default CBased;","map":{"version":3,"sources":["/Users/dianatyman/Desktop/music-recom-eval/src/CBased/CBased.js"],"names":["React","Component","CBased","constructor","state","userName","token","songName","songID","limit","url","URL","window","location","href","accessToken","searchParams","get","setState","console","log","getData","fetch","method","headers","then","response","json","data","items","map","i","includes","name","id","push","getUserData","display_name","componentDidMount","render"],"mappings":"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","sourcesContent":["import './CBased.css';\nimport React, {Component} from \"react\";\n\nclass CBased extends Component{\n\n\tconstructor() {\n    super();\n    this.state = {\n      userName:'',\n      token:'',\n      songName:[],\n      songID:[],\n      limit:10\n    };\n    const url = new URL(window.location.href);\n    const accessToken = url.searchParams.get('access_token');\n    //console.log(accessToken);\n    this.setState({\n          token: accessToken\n    });\n    console.log(this.state.token);\n  }\n\n  getData (accessToken) {\n    fetch('https://api.spotify.com/v1/me/top/tracks?limit=10', {\n      method: 'GET',\n      headers: {'Authorization': 'Bearer ' + accessToken,\n                'Content-Type': 'application/json',}\n    }).then(response => response.json())\n    .then(data => this.setState(state => {\n      //data.items.map(i => state.userData.push(!i.name))\n      //console.log(data);\n      data.items.map(function(i){\n        if (!state.songName.includes(i.name) && !state.songID.includes(i.id)){\n          state.songName.push(i.name);\n          state.songID.push(i.id);\n        }\n        \n        return state.songName && state.songID;\n      })\n    }));\n\n    // Check if it retreives song name and id correctly\n    //console.log(this.state.songName);\n    //console.log(this.state.songID);\n  }\n\n  getUserData(accessToken){\n  \t// Fetch User's profile information\n    fetch('https://api.spotify.com/v1/me', {\n      method: 'GET',\n      headers: {'Authorization': 'Bearer ' + accessToken}\n    }).then(response => response.json())\n    .then(data => this.setState({\n      userName: data.display_name\n    }));\n  }\n\n  componentDidMount() {\n   //  const url = new URL(window.location.href);\n   //  const accessToken = url.searchParams.get('access_token');\n\t  // //console.log(accessToken);\n\t  // this.setState({\n   //      \ttoken: accessToken\n   //  });\n\n    if(this.state.token){\n    \tthis.getUserData(this.state.token);\n      this.getData(this.state.token);\n    };\n\n  }\n\n\trender() {\n\t\t//console.log(Object.keys(this.state.songName).map(key => (this.state.songName[key])));\n    //console.log(this.state.songName[1]);\n    if(this.state.token){\n      console.log(\"LALALALLAALL\");\n    }\n\n    \treturn(\n     \t\t<div className=\"CB\">\n      \t\t\t<h1 style={{'fontSize': '35px','marginTop': '5px' }}>Content Based Reccommendation!</h1>\n      \t\t\t<h1 style={{'fontSize': '15px','marginTop': '5px' }}>User top songs:  \n              <div>\n                {this.state.songName}\n              </div>\n            </h1>\n      \t</div>\n      \t\t\n     \t);\n    }\n}\n\nexport default CBased;"]},"metadata":{},"sourceType":"module"}