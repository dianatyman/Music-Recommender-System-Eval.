{"ast":null,"code":"var _jsxFileName = \"/Users/dianatyman/Desktop/music-recom-eval/src/Home/Home.js\";\nimport React, { Component } from \"react\";\nimport window from 'global';\nimport querystring from 'querystring';\nimport Button from \"./../components/CustomButtonComponent\";\nimport history from './../history';\nimport \"./Home.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst fs = require('fs');\n\nconst SpotifyWebApi = require('spotify-web-api-node');\n\nconst spotifyApi = new SpotifyWebApi();\nexport default class Home extends Component {\n  /* CallFunction_1(){\n    //CB.render();\n    window.open(\"/CollabFiltering\");\n    \n    const script = document.createElement('script');\n    script.src = \"./CollabFiltering.js\";\n    script.async = true;\n    document.body.appendChild(script);\n     window.location.href = script;\n    \n    //window.open(\"./CollabFiltering.js\");\n    //window.reload(\"./CollabFiltering.js\", true);\n    //document.location.href = \"./CollabFiltering.js\";\n  } */\n  constructor() {\n    super();\n\n    this.showHandler = () => {\n      this.setState({\n        isActive: true\n      });\n    };\n\n    this.state = {\n      userName: '',\n      isActive: false,\n      token: '',\n      userData: {},\n      limit: 10\n    };\n  } // state = {\n  //    isActive:false\n  // }\n  // getUserRecentSongs(userName) {\n  //   let data_songs = spotifyApi.getMyRecentlyPlayedTracks({\n  //                               limit : 20\n  //                             }).then(function(data) {\n  //                             // Output items\n  //                               console.log(\"Your 20 most recently played tracks are:\");\n  //                               data.body.items.forEach(item => console.log(item.track.name));\n  //                             }, function(err) {\n  //                               console.log('Something went wrong!', err);\n  //                             });\n  // }\n\n\n  componentDidMount() {\n    // let parsed = querystring.parse(window.location.search);\n    // let accessToken = parsed.access_token;\n    const url = new URL(window.location.href);\n    const accessToken = url.searchParams.get('access_token');\n    console.log(accessToken); // fetch('https://api.spotify.com/v1/me', {\n    //   headers: {'Authorization': 'Bearer' + accessToken}\n    // }).then(response => {\n    //  console.log(\"request\")        \n    // if (response.ok) {\n    //      return response.json();\n    //    } else {\n    //       throw new console.error(\"Something went wrong ...\");\n    //    }\n    //  })\n    // .then(data => this.setState({ userName: data.display_name}))\n    // .catch(error => this.setState({ error }));\n\n    fetch('https://api.spotify.com/v1/me', {\n      method: 'GET',\n      headers: {\n        'Authorization': 'Bearer ' + accessToken\n      }\n    }).then(response => response.json()).then(data => this.setState({\n      userName: data.display_name\n    }));\n    fetch('https://api.spotify.com/v1/me/top/tracks?limit=2', {\n      method: 'GET',\n      headers: {\n        'Authorization': 'Bearer ' + accessToken,\n        'Content-Type': 'application/json'\n      }\n    }).then(response => response.json()).then(data => this.setState({\n      userData: data.items\n    })); // let songName = songs.map(songs => {\n    //     let responsePromise = fetch(songs.tracks.href, {\n    //     headers: {'Authorization': 'Bearer ' + accessToken}\n    //   })\n    // }\n    // .then(data => this.setState({\n    //     songName: data.items.map((item) => {\n    //       item.name\n    //     })\n    // }));\n    // .then(data => this.setState({\n    //    songName: data.items[1].name\n    //  }));\n    // console.log(this.state.songName);\n    // .then(response => response.json())\n    //.then(data => console.log(data.items[1].name));\n    // .then(data => this.setState({\n    //   songName: data.items.name\n    // }));\n\n    console.log(this.state.userData[0].name); //.then(data => this.setState({serverData: {user: {name: data.display_name}}}));\n    // GET MY PROFILE DATA\n    // const me = spotifyApi.getMe();\n    // console.log(me.body + \"blabla\");\n    //   getUserPlaylists(me.body.id);\n    // getUserRecentSongs(me.body.id);\n    // (async () => {\n    //   spotifyApi.setAccessToken(accessToken);\n    //   const me = await spotifyApi.getMe();\n    //   console.log(me.body + \"blabla\");\n    //   //getUserPlaylists(me.body.id);\n    //   //getUserRecentSongs(me.body.id);\n    // })().catch(e => {\n    //   console.error(e);\n    // });\n\n    this.setState({\n      token: accessToken\n    }); //this.setState({serverData: {user: {name:me.body.display_name}}});\n    //this.setState.userName = me.body.display_name;\n    // this.setState({\n    //       userName: me.body.display_name\n    //   })\n  }\n\n  // hideHandler = () =>{\n  //     this.setState({\n  //         isActive: false\n  //     })\n  // }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Home\",\n      children: [this.state.isActive ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Music Recommendation System Evaluation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Music recommendation system where users can choose which recommendation algorithm they enjoy better. This app is part of my final project for my degree in data science imparted by University Pompeu Fabra.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            'fontSize': '15px',\n            'marginTop': '5px'\n          },\n          children: [\"User name: \", this.state.userName, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          border: \"none\",\n          color: \"pink\",\n          height: \"200px\",\n          onClick: () => alert(\"CB Button\"),\n          radius: \"50%\",\n          width: \"200px\",\n          children: \"Content Based Recommender System\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"25%\",\n            display: 'inline-block'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          border: \"none\",\n          color: \"#9DC183\",\n          height: \"200px\",\n          onClick: () => history.push('/CollabFiltering'),\n          radius: \"50%\",\n          width: \"200px\",\n          children: \"Collaborative Filtering\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location = 'http://localhost:8888/login',\n        children: \"Sign in with Spotify\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 20\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.showHandler,\n        children: \"Click here to continue\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/dianatyman/Desktop/music-recom-eval/src/Home/Home.js"],"names":["React","Component","window","querystring","Button","history","fs","require","SpotifyWebApi","spotifyApi","Home","constructor","showHandler","setState","isActive","state","userName","token","userData","limit","componentDidMount","url","URL","location","href","accessToken","searchParams","get","console","log","fetch","method","headers","then","response","json","data","display_name","items","name","render","alert","width","display","push"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport window from 'global';\nimport querystring from 'querystring';\nimport Button from \"./../components/CustomButtonComponent\";\nimport history from './../history';\nimport \"./Home.css\";\n\nconst fs = require('fs')\nconst SpotifyWebApi = require('spotify-web-api-node');\nconst spotifyApi = new SpotifyWebApi();\n\n\nexport default class Home extends Component {\n\n  /* CallFunction_1(){\n    //CB.render();\n    window.open(\"/CollabFiltering\");\n    \n    const script = document.createElement('script');\n    script.src = \"./CollabFiltering.js\";\n    script.async = true;\n    document.body.appendChild(script);\n\n    window.location.href = script;\n    \n    //window.open(\"./CollabFiltering.js\");\n    //window.reload(\"./CollabFiltering.js\", true);\n    //document.location.href = \"./CollabFiltering.js\";\n  } */ \n\n  constructor() {\n    super();\n    this.state = {\n      userName:'',\n      isActive:false,\n      token:'',\n      userData:{},\n      limit:10\n    }\n  }\n\n  // state = {\n  //    isActive:false\n  // }\n  // getUserRecentSongs(userName) {\n  //   let data_songs = spotifyApi.getMyRecentlyPlayedTracks({\n  //                               limit : 20\n  //                             }).then(function(data) {\n  //                             // Output items\n  //                               console.log(\"Your 20 most recently played tracks are:\");\n  //                               data.body.items.forEach(item => console.log(item.track.name));\n  //                             }, function(err) {\n  //                               console.log('Something went wrong!', err);\n  //                             });\n\n  // }\n\n  componentDidMount() {\n    // let parsed = querystring.parse(window.location.search);\n    // let accessToken = parsed.access_token;\n\n    const url = new URL(window.location.href);\n    const accessToken = url.searchParams.get('access_token');\n\n    console.log(accessToken);\n    // fetch('https://api.spotify.com/v1/me', {\n    //   headers: {'Authorization': 'Bearer' + accessToken}\n    // }).then(response => {\n    //  console.log(\"request\")        \n    // if (response.ok) {\n    //      return response.json();\n    //    } else {\n    //       throw new console.error(\"Something went wrong ...\");\n    //    }\n    //  })\n    // .then(data => this.setState({ userName: data.display_name}))\n    // .catch(error => this.setState({ error }));\n\n\n    fetch('https://api.spotify.com/v1/me', {\n      method: 'GET',\n      headers: {'Authorization': 'Bearer ' + accessToken}\n    }).then(response => response.json())\n    .then(data => this.setState({\n      userName: data.display_name\n    }));\n\n    fetch('https://api.spotify.com/v1/me/top/tracks?limit=2', {\n      method: 'GET',\n      headers: {'Authorization': 'Bearer ' + accessToken,\n                'Content-Type': 'application/json',}\n    }).then(response => response.json())\n    .then(data => this.setState({\n      userData: data.items\n    }));\n\n      // let songName = songs.map(songs => {\n      //     let responsePromise = fetch(songs.tracks.href, {\n      //     headers: {'Authorization': 'Bearer ' + accessToken}\n      //   })\n      // }\n    \n    // .then(data => this.setState({\n    //     songName: data.items.map((item) => {\n    //       item.name\n    //     })\n    // }));\n    // .then(data => this.setState({\n    //    songName: data.items[1].name\n    //  }));\n    \n\n    // console.log(this.state.songName);\n    // .then(response => response.json())\n    //.then(data => console.log(data.items[1].name));\n    // .then(data => this.setState({\n    //   songName: data.items.name\n    // }));\n\n    console.log(this.state.userData[0].name);\n\n    //.then(data => this.setState({serverData: {user: {name: data.display_name}}}));\n\n    // GET MY PROFILE DATA\n    // const me = spotifyApi.getMe();\n    // console.log(me.body + \"blabla\");\n    //   getUserPlaylists(me.body.id);\n    // getUserRecentSongs(me.body.id);\n    // (async () => {\n    //   spotifyApi.setAccessToken(accessToken);\n    //   const me = await spotifyApi.getMe();\n    //   console.log(me.body + \"blabla\");\n    //   //getUserPlaylists(me.body.id);\n    //   //getUserRecentSongs(me.body.id);\n    // })().catch(e => {\n    //   console.error(e);\n    // });\n\n    this.setState({\n        token: accessToken\n    })\n    //this.setState({serverData: {user: {name:me.body.display_name}}});\n    //this.setState.userName = me.body.display_name;\n    // this.setState({\n    //       userName: me.body.display_name\n    //   })\n  }\n\n  showHandler = ()=>{\n      this.setState({\n          isActive: true\n      })\n  }\n\n  // hideHandler = () =>{\n  //     this.setState({\n  //         isActive: false\n  //     })\n  // }\n\n  render() {\n    return (\n      <div className=\"Home\">\n\n        {this.state.isActive ? \n          <div>\n            <h1>Music Recommendation System Evaluation</h1>\n            <p>\n              Music recommendation system where users can choose which recommendation algorithm they enjoy better. \n              This app is part of my final project for my degree in data science imparted by University Pompeu Fabra.\n            </p>\n\n            <h1 style={{'fontSize': '15px','marginTop': '5px' }}>User name: {this.state.userName} </h1>\n\n            <Button\n              border=\"none\"\n              color=\"pink\"\n              height = \"200px\"\n              onClick={() => alert(\"CB Button\")}\n              radius = \"50%\"\n              width = \"200px\"\n              children = \"Content Based Recommender System\"\n            />\n            <div style={{width:\"25%\", display:'inline-block'}}/>\n            <Button\n              border=\"none\"\n              color=\"#9DC183\"\n              height = \"200px\"\n              onClick={() => history.push('/CollabFiltering')}\n              radius = \"50%\"\n              width = \"200px\"\n              children = \"Collaborative Filtering\"\n            />\n\n          </div> : <button onClick={() => window.location='http://localhost:8888/login' }>Sign in with Spotify</button>\n\n          } \n\n          <button onClick={this.showHandler}>Click here to continue</button>\n\n          {/* arreglar esto, esconder el botón o cambiarlo para que funcione con el api */}\n\n    </div>\n    \n    );\n  }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}